<html>

<head>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui" />
</head>

<body>
    <!-- Basic inclusions to support the settings for widgets -->
    <script src="/ui/vendors/jquery/dist/jquery.min.js"></script>
    <script src="/ui/assets/widget-utilities.js"></script>
    <div class="settings-page accordion">
        <div class="panel" style="margin-bottom: 10px">
            <a class="panel-heading widget-accordion">
                <p>Widget Configuration</p>
                <i class="fa fa-sort-asc accordion-indicator" aria-hidden="true"></i>
            </a>

            <div id="app">
                <v-app>
                    <v-container class="mx-8">
                        <v-row dense style="margin-top: 25px">
                            <v-col cols="12" sm="6">
                                <h4>Floorplan Image:</h4>
                            </v-col>
                            <v-col cols="12" sm="6">
                                <v-btn v-if="updateImageBtn" color="primary" dense
                                    @click="updateImageBtn = !updateImageBtn" style="width: 60%">
                                    Update Image
                                </v-btn>
                                <v-file-input v-else v-model="ImageFile" label="File*" outlined required prepend-icon=""
                                    dense prepend-inner-icon="$file" style="width: 60%"></v-file-input>
                            </v-col>
                        </v-row>
                        <v-divider></v-divider>
                        <div v-for="(item, i) in chosenDevices" :key="i">
                            <v-row dense>

                                <v-col cols="12" sm="2">
                                    <h4>Device:</h4>
                                </v-col>

                                <v-col cols="12" sm="4">
                                    <v-autocomplete dense :items="deviceNames" outlined v-model="item.deviceName"
                                        label="Device">
                                    </v-autocomplete>
                                </v-col>
                                <v-col cols="12" sm="1">
                                    <h4>Icon:</h4>
                                </v-col>

                                <v-col cols="12" sm="3">
                                    <v-select dense :items="icons" outlined v-model="item.icon" label="Icon Image">
                                    </v-select>
                                </v-col>
                                <v-col cols="12" sm="2" align="right">
                                    <v-btn class="mr-16" icon dark small color="red" @click="deleteSelection(i)">
                                        <v-icon dark> mdi-close </v-icon>
                                    </v-btn>
                                </v-col>
                                <v-col cols="12" sm="2">
                                    <h4>X Position:</h4>
                                </v-col>
                                <v-col cols="12" sm="4">
                                    <v-select dense :items="axis" outlined style="width: 50%" v-model="item.Xpos">
                                    </v-select>
                                </v-col>
                                <v-col cols="12" sm="2">
                                    <h4>Y Position:</h4>
                                </v-col>
                                <v-col cols="12" sm="4">
                                    <v-select dense :items="axis" outlined style="width: 50%" v-model="item.Ypos">
                                    </v-select>
                                </v-col>
                            </v-row>
                            <v-divider></v-divider>
                        </div>
                        <v-btn fab color="cyan" small bottom right absolute @click="addSelection">
                            <v-icon>mdi-plus</v-icon>
                        </v-btn>
                    </v-container>
                </v-app>
            </div>
        </div>

        <!-- Settings HTML for regular AmCharts configuration -->
        <div class="panel">
            <a class="panel-heading widget-accordion">
                <p>Metrics</p>
                <i class="fa fa-sort-asc accordion-indicator" aria-hidden="true"></i>
            </a>
            <div class="panel-body">
                <div id="metricsselector"></div>
            </div>
        </div>
        <div id="divUserFeedback"></div>
        <div style="text-align: right">
            <br />
            <button id="buttonSaveWidgetSettings" class="btn btn-primary">
                Apply Settings
            </button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
    <script src="settings.js"></script>
</body>

</html>